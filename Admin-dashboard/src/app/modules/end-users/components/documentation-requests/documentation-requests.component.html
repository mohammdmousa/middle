<div class="card shadow-sm border-0">
  <!-- Card Header -->
  <div class="card-header bg-gradient-primary text-white py-3">
    <h5 class="m-0 pb-2 fw-semibold">
      <i class="fas fa-clipboard-check me-2"></i> طلبات توثيق الشركات
    </h5>
  </div>

  <!-- Verification Requests Table -->
  <div class="card-body p-0">
    <div class="table-responsive">
      <table class="table table-hover align-middle mb-0">
        <thead class="table-light">
          <tr>
            <th>صورة السجل التجاري</th>
            <th>اسم الشركة</th>
            <th>شعار الشركة</th>
            <th>الموقع</th>
            <th>المدينة</th>
            <th>الدولة</th>
            <th>رقم الهاتف</th>
            <th>مقدم الطلب</th>
            <th>حالة الطلب</th>
            <th>الإجراءات</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let request of requests">
            <td>
              <a
                href="{{ url }}{{ request.commercial_record }}"
                target="_blank"
                class="btn btn-sm btn-outline-primary"
              >
                <i class="fas fa-file-pdf"></i> عرض السجل
              </a>
            </td>
            <td>{{ request.company_name }}</td>
            <td>
              <img
                *ngIf="request.company_logo"
                style="width: 40px; height: 40px; object-fit: contain"
                src="{{ url }}{{ request.company_logo }}"
                alt="شعار الشركة"
                class="rounded"
              />
              <span *ngIf="!request.company_logo">لا يوجد شعار</span>
            </td>
            <td>{{ request.location }}</td>
            <td>{{ request.city?.name_ar || request.city_name }}</td>
            <td>{{ request.country?.name_ar || request.country_name }}</td>
            <td>{{ request.phone }}</td>
            <td>
              <a [routerLink]="['/admin/users', request.user_id]">
                {{ request.user?.name || "مستخدم" }}
              </a>
            </td>
            <td>
              <span
                class="badge"
                [ngClass]="{
                  'bg-warning': request.status === 'pending',
                  'bg-success': request.status === 'approved',
                  'bg-danger': request.status === 'rejected'
                }"
              >
                {{ getStatusText(request.status) }}
              </span>
            </td>
            <td>
              <div class="d-flex gap-2" *ngIf="request.status === 'pending'">
                <button
                  class="btn btn-sm btn-success"
                  (click)="approveRequest(request.id)"
                >
                  <i class="fas fa-check"></i> قبول
                </button>
                <button
                  class="btn btn-sm btn-danger"
                  (click)="rejectRequest(request.id)"
                >
                  <i class="fas fa-times"></i> رفض
                </button>
              </div>
              <span *ngIf="request.status !== 'pending'">تمت المعالجة</span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Empty State -->
  <div class="card-body text-center" *ngIf="requests.length === 0">
    <img
      src="assets/images/no-data.svg"
      alt="لا توجد بيانات"
      style="height: 150px"
    />
    <h5 class="mt-3">لا توجد طلبات توثيق حالياً</h5>
  </div>
</div>
